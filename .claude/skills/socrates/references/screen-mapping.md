# 화면 매핑 로직 (Screen Mapping)

> **로드 시점**: 기능→화면 전환 시 (Phase 2)

---

## 화면 매핑의 핵심 원칙

```
기능(Function) → 화면(Screen) → 컴포넌트(Component)

예시:
- 기능: "게시물 작성"
- 화면: "메인 피드"
- 컴포넌트: "작성 버튼", "작성 모달", "텍스트 에디터"
```

---

## Phase 2 워크플로우

### Step 1: 기능 → 화면 매핑
```
각 기능에 대해 질문:
- "{기능명}은 어떤 화면에서 하나요?"
- "{기능명}을 위한 별도 화면이 필요한가요?"
```

### Step 2: 화면 간 이동 경로
```
화면 목록이 나온 후 질문:
- "화면 간 이동 경로가 어떻게 되나요?"
- "사용자가 처음 보는 화면은 어디인가요?"
- "마지막으로 보는 화면은 어디인가요?"
```

### Step 3: 컴포넌트 도출
```
각 화면에 대해 질문:
- "{화면명}에 어떤 버튼이 필요한가요?"
- "{화면명}에 어떤 입력 필드가 필요한가요?"
- "{화면명}에 어떤 목록이 보이나요?"
```

---

## 기능 → 화면 전환 규칙

### 규칙 1: 1기능 = 1화면 (기본)
```
기능: "로그인"
화면: "로그인 화면" (/login)

기능: "대시보드 보기"
화면: "대시보드 화면" (/dashboard)
```

### 규칙 2: N기능 = 1화면 (통합)
```
기능1: "게시물 보기"
기능2: "게시물 작성"
기능3: "댓글 달기"
→ 화면: "메인 피드 화면" (/feed)
  - 컴포넌트: 게시물 목록, 작성 버튼, 댓글 입력
```

### 규칙 3: 1기능 = N화면 (분할)
```
기능: "사용자 관리"
→ 화면1: "사용자 목록 화면" (/users)
→ 화면2: "사용자 상세 화면" (/users/:id)
→ 화면3: "사용자 편집 화면" (/users/:id/edit)
```

---

## 화면 분류 패턴

### 1. 인증 화면
```
- 로그인 화면 (/login)
- 회원가입 화면 (/signup)
- 비밀번호 찾기 화면 (/reset-password)
```

### 2. 메인 화면
```
- 대시보드 화면 (/dashboard)
- 홈 화면 (/)
- 피드 화면 (/feed)
```

### 3. CRUD 화면
```
- 목록 화면 (/items)
- 상세 화면 (/items/:id)
- 생성 화면 (/items/new)
- 편집 화면 (/items/:id/edit)
```

### 4. 설정 화면
```
- 프로필 설정 (/settings/profile)
- 알림 설정 (/settings/notifications)
- 계정 설정 (/settings/account)
```

---

## 화면 간 이동 경로 패턴

### 패턴 1: 선형 플로우
```
로그인 → 대시보드 → 상세 → 편집 → 대시보드
```

### 패턴 2: 허브-스포크 플로우
```
대시보드 (허브)
├─ 프로젝트 목록
├─ 사용자 관리
└─ 설정
```

### 패턴 3: 탭 플로우
```
메인 화면
├─ 탭1: 피드
├─ 탭2: 검색
├─ 탭3: 알림
└─ 탭4: 프로필
```

---

## 컴포넌트 도출 규칙

### 규칙 1: 기능 기반 도출
```
기능: "게시물 작성"
→ 컴포넌트:
  - 작성 버튼 (Button)
  - 작성 모달 (Modal)
  - 텍스트 에디터 (Textarea)
  - 이미지 업로드 (FileInput)
  - 게시 버튼 (Button)
```

### 규칙 2: 화면 기반 도출
```
화면: "메인 피드"
→ 컴포넌트:
  - 헤더 (Header)
  - 게시물 목록 (PostList)
  - 게시물 카드 (PostCard)
  - 좋아요 버튼 (LikeButton)
  - 댓글 입력 (CommentInput)
  - 푸터 (Footer)
```

### 규칙 3: 재사용 컴포넌트 식별
```
공통 컴포넌트:
- Button (Primary, Secondary, Outline)
- Input (Text, Email, Password)
- Modal (Confirm, Alert)
- Header (로고, 네비게이션, 프로필)
- Footer (저작권, 링크)
```

---

## 레벨별 화면 매핑 전략

### L1 (초심자) - 예시 제공
```
질문: "게시물 작성은 어떤 화면에서 하나요?"

선택지 제공:
1. "메인 피드 화면에 작성 버튼"
2. "별도의 작성 화면으로 이동"
3. "모달 팝업으로 작성"

사용자 선택 → 자동으로 컴포넌트 도출
```

### L2 (일반인) - 힌트 제공
```
질문: "게시물 작성은 어떤 화면에서 하나요?"

힌트: "인스타그램처럼 + 버튼을 누르면 작성 화면이 나오나요?
       아니면 피드 상단에 '무슨 생각을 하고 계신가요?' 같은 입력창이 있나요?"

사용자 답변 → 화면 구조 정리
```

### L3/L4 (경험자) - 자유 답변
```
질문: "게시물 작성은 어떤 화면에서 하나요?"

사용자 답변: "메인 피드 상단에 입력창이 있고, 클릭하면 모달이 뜹니다"
→ 바로 화면 구조 정리
```

---

## 화면 매핑 완료 기준

### 필수 조건
```
✅ 모든 기능이 화면에 매핑됨
✅ 화면 간 이동 경로가 명확함
✅ 각 화면의 컴포넌트가 식별됨
✅ URL 경로가 정의됨
✅ 재사용 컴포넌트가 식별됨
```

### 검증 방법
```
1. 기능 목록 vs 화면 목록 매칭 확인
2. 화면 이동 경로를 Mermaid 다이어그램으로 시각화
3. 컴포넌트 목록 중복 제거
4. URL 경로 충돌 확인
```

---

## 화면 매핑 예시

### 시나리오: SNS 기획

#### Step 1: 기능 목록 (Phase 1 결과)
```
1. 게시물 작성
2. 친구 추가
3. 좋아요
```

#### Step 2: 기능 → 화면 매핑
```
Q: "게시물 작성은 어떤 화면에서 하나요?"
A: "메인 피드 화면에 작성 버튼이 있고, 클릭하면 모달이 뜹니다"

Q: "친구 추가는 어떤 화면에서 하나요?"
A: "프로필 화면에 친구 추가 버튼이 있어요"

Q: "좋아요는 어떤 화면에서 하나요?"
A: "게시물마다 좋아요 버튼이 있어요"

→ 화면 목록:
1. 메인 피드 화면 (/feed)
2. 프로필 화면 (/profile/:id)
3. 작성 모달 (모달)
```

#### Step 3: 화면 간 이동 경로
```
Q: "화면 간 이동 경로가 어떻게 되나요?"
A: "로그인 → 메인 피드 → 프로필 → 메인 피드"

→ 이동 경로 다이어그램:
```
로그인 화면
    ↓
메인 피드 화면
    ↓ (클릭)
프로필 화면
    ↓ (뒤로가기)
메인 피드 화면
```
```

#### Step 4: 컴포넌트 도출
```
Q: "메인 피드 화면에 어떤 컴포넌트가 필요한가요?"
A: "게시물 목록, 작성 버튼, 좋아요 버튼, 댓글 입력창"

→ 컴포넌트 목록:
- PostList
- PostCard
- CreateButton
- LikeButton
- CommentInput
- CreateModal (모달)
```

---

## 에러 처리

### 에러 1: 화면이 너무 많을 때
```
경고: 화면이 10개 이상 (MVP 범위 초과)

해결:
1. 우선순위가 낮은 화면 제거
2. 비슷한 화면 통합
3. MVP 범위 재정의
```

### 에러 2: 화면이 너무 적을 때
```
경고: 화면이 3개 이하 (기능 부족)

해결:
1. 기능을 다시 확인
2. 숨겨진 화면 찾기 (설정, 프로필 등)
3. CRUD 화면 추가 (목록, 상세, 편집)
```

### 에러 3: 이동 경로가 순환할 때
```
경고: 순환 참조 (A → B → C → A)

해결:
1. 순환이 의도된 것인지 확인
2. 의도된 순환이면 허용
3. 의도되지 않았으면 경로 수정
```

---

## 다음 단계 전달 정보

### 06-screens.md에 기록
```
- 화면 목록 (ID, 경로, 기능, 컴포넌트)
- 화면 간 이동 경로 (다이어그램)
- 재사용 컴포넌트 목록
```

### /screen-spec으로 전달
```
- 화면 목록 (화면별 YAML 명세 생성)
- 컴포넌트 목록 (컴포넌트 속성 정의)
- URL 경로 (라우팅 정의)
```

---

## 마지막 업데이트
**날짜**: 2026-02-15
**버전**: 1.0.0
