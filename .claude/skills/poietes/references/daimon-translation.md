# 다이몬 중재 (Phase 3)

> **로드 시점**: Phase 2 완료 후, Phase 3 진입 시

---

## Phase 3: 다이몬 중재 (Daimon Mediation)

> "다이몬은 사람들이 바치는 기도를 신들에게 해석하고 전달하며,
> 신들로부터 오는 응답을 사람들에게 해석하고 전달한다." — 향연 202e

AI(다이몬)이 사용자의 욕망(기능)을 실행 가능한 형태(화면, 기술)로 번역하는 과정이다.
프롬프트는 '명령'이 아닌 '기도'다. 기도의 품질이 다이몬의 응답 품질을 결정한다.

---

## 소크라테스 질문 매핑

```
소크라테스 원본              →   포이에테스 변환
───────────────────────────────────────────────
Q9:  "{기능1} 어떤 화면?"    →   Q11: 기도를 형태로 (기능→화면)
Q10: "{기능2} 어떤 화면?"    →   Q12: 기도를 형태로
Q11: "{기능3} 어떤 화면?"    →   Q13: 기도를 형태로
Q12: "화면 간 이동 경로?"     →   Q14: 형태 간 연결
Q13: "각 화면 컴포넌트?"      →   Q15: 형태의 구성
Q14: "처음 뭘 보나?"         →   Q16: 입문의 여정
Q15: "그 다음 뭘 하나?"       →   Q17: 상승의 여정
Q16: "마지막으로 뭘 하나?"    →   Q18: 완성의 여정
Q17: "기술 스택?"            →   Q19: 다이몬의 도구 (L3/L4)
Q18: "왜 그 기술?"           →   Q20: 다이몬의 선택 (L3/L4)
Q19: "다른 기술 비교?"        →   Q21: 다이몬의 트레이드오프 (L3/L4)
```

---

## Step 1: 기능 → 화면 (기도 → 형태)

### 핵심 원칙

```
기능(Function) → 화면(Screen) → 컴포넌트(Component)

다이몬의 번역:
사용자의 기도(기능) → 신의 형태(화면) → 형태의 구성(컴포넌트)
```

### Q11-Q13: 각 기능의 화면 매핑

각 핵심 기능에 대해 질문한다:

```markdown
기능: "{기능명}"

Q: "{기능명}은 어떤 화면에서 하나요?
   그 화면을 상상해보세요. 뭐가 보이나요?"
```

**레벨별 접근:**

- **L1 (초심자)**: 선택지 제공
  ```json
  {
    "questions": [{
      "question": "'{기능명}' 기능은 어떤 화면에서 하나요?",
      "header": "화면 매핑",
      "options": [
        {"label": "메인 화면에 바로", "description": "메인 화면에서 바로 이 기능을 사용"},
        {"label": "별도 화면으로 이동", "description": "버튼을 누르면 새 화면이 열림"},
        {"label": "팝업/모달로", "description": "현재 화면 위에 팝업이 뜸"},
        {"label": "잘 모르겠어요", "description": "AI가 추천해주세요"}
      ],
      "multiSelect": false
    }]
  }
  ```

- **L2 (일반인)**: 힌트 제공
  ```
  "인스타그램처럼 + 버튼을 누르면 작성 화면이 나오나요?
   아니면 피드 상단에 입력창이 있나요?"
  ```

- **L3/L4 (경험자/전문가)**: 자유 답변
  ```
  "{기능명}은 어떤 화면에서 하나요?"
  ```

### 기능 → 화면 전환 규칙

```
규칙 1: 1기능 = 1화면 (기본)
  기능: "로그인" → 화면: "로그인 화면" (/login)

규칙 2: N기능 = 1화면 (통합)
  기능1: "게시물 보기"
  기능2: "좋아요"
  기능3: "댓글 달기"
  → 화면: "메인 피드 화면" (/feed)

규칙 3: 1기능 = N화면 (분할)
  기능: "사용자 관리"
  → 화면1: "사용자 목록" (/users)
  → 화면2: "사용자 상세" (/users/:id)
  → 화면3: "사용자 편집" (/users/:id/edit)
```

### Q14: 화면 간 이동 경로

```markdown
"잠깐, 지금까지 나온 화면을 정리해볼게요:

1. {화면1} - {설명}
2. {화면2} - {설명}
3. {화면3} - {설명}

이 화면들 사이의 이동 경로가 어떻게 되나요?
어디서 시작해서 어디로 가나요?"
```

### Q15: 각 화면의 구성 요소

```markdown
"{화면명}에 어떤 것들이 보여야 하나요?
 버튼? 입력 필드? 목록? 그래프?"
```

**집요한 질문 (모호한 답변 시):**
```
사용자: "그냥 목록으로 보여주면 돼요"

→ "목록이요? 몇 개씩 보여주나요?
   스크롤하면 계속 로드되나요, 페이지 넘김인가요?
   목록 하나를 누르면 어떤 정보가 더 보이나요?"
```

**건너뛰려는 사용자 대응:**
```
사용자: "디자인은 나중에 생각할게요"

→ "디자인은 나중에 해도 돼요.
   하지만 '어떤 정보가 그 화면에 있는지'는 지금 정해야 해요.
   그 화면에 뭐가 보이나요? 텍스트? 숫자? 그래프?"
```

---

## Step 2: 화면 → 흐름 (형태 → 여정)

### Q16: 입문의 여정

```
"사용자가 처음 들어왔을 때 뭘 보나요?
 로그인 화면? 온보딩? 바로 메인 화면?"
```

### Q17: 상승의 여정

```
"첫 화면 이후, 사용자가 가장 먼저 하는 행동은 뭔가요?
 그러면 어떤 화면으로 이동하나요?"
```

### Q18: 완성의 여정

```
"사용자가 이 서비스에서 할 일을 다 했을 때,
 마지막으로 뭘 보고 떠나나요?"
```

### 화면 이동 경로 패턴

```
패턴 1: 선형 플로우
로그인 → 대시보드 → 상세 → 편집 → 대시보드

패턴 2: 허브-스포크 플로우
대시보드 (허브)
├─ 프로젝트 목록
├─ 사용자 관리
└─ 설정

패턴 3: 탭 플로우
메인 화면
├─ 탭1: 피드
├─ 탭2: 검색
├─ 탭3: 알림
└─ 탭4: 프로필
```

---

## Step 3: 흐름 → 기술 (여정 → 도구) — L3/L4만

### Q19: 다이몬의 도구 선택

**L1/L2는 자동 추천:**

```json
{
  "questions": [{
    "question": "기술적인 부분은 다이몬(AI)이 정리해드릴게요.\n\n당신의 프로젝트에 가장 적합한 기술 조합:\n\n📦 프론트엔드: React + Vite\n🔧 백엔드: FastAPI (Python)\n💾 데이터베이스: PostgreSQL\n\n이대로 진행할까요?",
    "header": "기술 스택",
    "options": [
      {"label": "네, 좋아요!", "description": "추천대로 진행"},
      {"label": "잘 모르겠어요", "description": "좀 더 설명해주세요"}
    ],
    "multiSelect": false
  }]
}
```

**L3/L4는 트레이드오프 질문:**

```json
{
  "questions": [{
    "question": "기술 스택을 결정할 시간입니다.\n\n어떤 기술 스택을 쓰고 싶으세요?",
    "header": "기술 스택",
    "options": [
      {"label": "Next.js 14 + TypeScript", "description": "풀스택 프레임워크, SSR 지원"},
      {"label": "React + Vite + FastAPI", "description": "프론트/백 분리, Python 백엔드"},
      {"label": "SvelteKit", "description": "경량 풀스택, 빠른 빌드"},
      {"label": "직접 입력", "description": "Other로 직접 기술 스택 지정"}
    ],
    "multiSelect": false
  }]
}
```

### Q20-Q21: 기술 선택 근거 (L3/L4만)

```
Q20: "왜 그 기술을 선택하셨나요?"
Q21: "다른 기술과 비교해 보셨나요? 트레이드오프는?"
```

---

## 화면 매핑 완료 기준

```
✅ 모든 핵심 기능이 화면에 매핑됨
✅ 화면 간 이동 경로가 명확함 (시작 → 중간 → 끝)
✅ 각 화면의 주요 컴포넌트가 식별됨
✅ 진입점이 정의됨 (첫 화면)
✅ 최소 2개 사용자 시나리오 흐름 확인
✅ 기술 스택 결정 (L1/L2는 자동 추천)
```

### 화면 수 가이드

```
⚠️ 화면이 10개 이상: MVP 범위 초과 → 우선순위 정리 필요
✅ 화면 4-8개: 적절한 MVP 범위
⚠️ 화면이 3개 이하: 기능 부족 → 숨겨진 화면 찾기 (설정, 프로필 등)
```

---

## Phase 3 컨텍스트 캐싱

```
Phase 3 완료 시 기록:
- 화면 목록 (ID, 경로, 기능, 컴포넌트)
- 화면 간 이동 경로 (다이어그램)
- 재사용 컴포넌트 목록
- 기술 스택 (확정)
- URL 경로 정의
```

### 다음 스킬 전달 정보

```
/screen-spec으로 전달:
- docs/planning/06-screens.md 경로
- 화면 목록 (Phase 3 결과)
- 기술 스택 결과
```

---

## 화면 매핑 예시

### 시나리오: 가계부 앱

```
[Phase 2에서 욕망 확인 완료]
핵심 기능: 지출 기록, 카테고리 분석, 예산 알림

Q11: "지출 기록은 어떤 화면에서 하나요?"
A: "홈 화면에서 + 버튼을 누르면 입력 모달이 뜨면 좋겠어요"

Q12: "카테고리 분석은 어떤 화면에서 하나요?"
A: "분석 탭에서 그래프로 보고 싶어요"

Q13: "예산 알림은 어떤 화면에서 하나요?"
A: "설정에서 예산을 정하고, 알림은 푸시로"

Q14: "화면 간 이동 경로가 어떻게 되나요?"
A: "홈 → 기록 입력 → 홈 / 홈 → 분석 탭 / 설정에서 예산 설정"

→ 화면 목록:
1. 홈 화면 (/home) - 오늘 지출 요약, + 버튼
2. 지출 기록 모달 - 금액, 카테고리, 메모 입력
3. 분석 화면 (/analysis) - 카테고리별 그래프
4. 설정 화면 (/settings) - 예산 설정, 알림 설정
5. 지출 목록 화면 (/history) - 기록 히스토리

Q16: "사용자가 처음 들어오면 뭘 보나요?"
A: "홈 화면에서 오늘 쓴 돈 총액"

Q17: "그 다음엔 뭘 하나요?"
A: "+ 버튼 눌러서 지출 기록"

Q18: "마지막으로 뭘 하고 떠나나요?"
A: "오늘 남은 예산 확인하고 나감"
```

---

## 마지막 업데이트
**날짜**: 2026-02-20
**버전**: 1.0.0
